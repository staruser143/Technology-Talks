Got it ‚Äî let‚Äôs wire this up in Spring + Jackson so your Freemarker dispatcher can consume the YAML schema directly at runtime.  

---

üõ†Ô∏è Step 1: Define a POJO for the Layout Schema

`java
// LayoutBlock.java
public class LayoutBlock {
    private String id;
    private String type;
    private String field;
    private String style;
    private List<Column> columns;
    private String chartType;

    // getters and setters

    public static class Column {
        private String name;
        // getters and setters
    }
}
`

`java
// LayoutRegistry.java
public class LayoutRegistry {
    private List<LayoutBlock> layoutRegistry;
    // getters and setters
}
`

---

üõ†Ô∏è Step 2: Load YAML with Jackson

Spring Boot already ships with Jackson. Add the YAML module:

`xml
<!-- pom.xml -->
<dependency>
  <groupId>com.fasterxml.jackson.dataformat</groupId>
  <artifactId>jackson-dataformat-yaml</artifactId>
</dependency>
`

Then load the YAML:

`java
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.dataformat.yaml.YAMLFactory;
import org.springframework.stereotype.Component;

import java.io.InputStream;

@Component
public class LayoutRegistryLoader {

    private final LayoutRegistry registry;

    public LayoutRegistryLoader() throws Exception {
        ObjectMapper mapper = new ObjectMapper(new YAMLFactory());
        try (InputStream is = getClass().getResourceAsStream("/layoutRegistry.yaml")) {
            this.registry = mapper.readValue(is, LayoutRegistry.class);
        }
    }

    public LayoutRegistry getRegistry() {
        return registry;
    }
}
`

---

üõ†Ô∏è Step 3: Expose Registry to Freemarker

Spring Boot auto-configures Freemarker. You can inject the registry into the model:

`java
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class DocumentController {

    private final LayoutRegistryLoader loader;

    public DocumentController(LayoutRegistryLoader loader) {
        this.loader = loader;
    }

    @GetMapping("/render")
    public String render(Model model) {
        // Example business data
        Map<String, Object> businessData = Map.of(
            "title", "Dynamic Report",
            "description", "Generated at runtime",
            "items", List.of(Map.of("item", "A", "value", 10),
                             Map.of("item", "B", "value", 20)),
            "footerText", "Confidential"
        );

        model.addAttribute("model", businessData);
        model.addAttribute("layoutRegistry", loader.getRegistry().getLayoutRegistry());
        return "dispatcher"; // Freemarker template name
    }
}
`

---

üõ†Ô∏è Step 4: Dispatcher Template (dispatcher.ftl)

`ftl
<#list layoutRegistry as block>
  <#switch block.type>
    <#case "header">
      <h1>${model[block.field]!}</h1>
    <#break>

    <#case "paragraph">
      <p>${model[block.field]!}</p>
    <#break>

    <#case "table">
      <table border="1">
        <tr>
          <#list block.columns as col>
            <th>${col.name}</th>
          </#list>
        </tr>
        <#list model[block.field]! as row>
          <tr>
            <td>${row.item}</td>
            <td>${row.value}</td>
          </tr>
        </#list>
      </table>
    <#break>

    <#case "footer">
      <footer>${model[block.field]!}</footer>
    <#break>

    <#case "chart">
      <div>Render chart of type ${block.chartType} with data: ${model[block.field]!}</div>
    <#break>
  </#switch>
</#list>
`

---

‚úÖ Benefits
- Schema externalized in YAML ‚Üí business users can add new layouts without touching Java or Freemarker.
- Jackson + Spring Boot ‚Üí clean integration, YAML parsed into POJOs.
- Dispatcher stays stable ‚Üí only iterates over schema, no template sprawl.

---

üëâ Sridhar, since you‚Äôre keen on registry-driven pipelines, this setup makes the YAML the single source of truth. Would you like me to extend this with a Mermaid diagram showing the Spring + Jackson + Freemarker flow so you can visualize how the registry feeds into rendering?