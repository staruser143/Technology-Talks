Great question ‚Äî this is a common design decision when generating PDFs. There are **two main approaches** for headers and footers, and they serve different purposes. Let‚Äôs break it down.

---

## **1Ô∏è‚É£ Include headers/footers as part of the PDF template**

* You draw them **once** when creating the form template (static content).
* When filling the form:

  * You **cannot easily change the text** of headers/footers for each page unless you use separate fields.
  * Useful if headers/footers are **fixed**, like a company logo, standard title, or page frame.
* If you want **dynamic content** (e.g., customer name, date, page numbers), you would need to:

  * Add **text fields** in the header/footer region of each page.
  * Fill them programmatically before flattening.

**Pros:**

* Simple for static headers/footers.
* Easy to maintain visual consistency.

**Cons:**

* Hard to add dynamic content like page numbers after merging/adding pages.
* Any additional pages added **after flattening** won‚Äôt have headers/footers automatically.

---

## **2Ô∏è‚É£ Dynamically add headers/footers post-filling**

* After filling and flattening the form (and after adding summary pages / merging other PDFs):

  * Open each page in the final PDF.
  * Draw headers and footers using **PDPageContentStream**.
* You can include:

  * Customer-specific info (name, ID, date).
  * Page numbers (`Page X of Y`).
  * Logos, lines, or other design elements.

**Pros:**

* Fully flexible ‚Äî works even after adding pages or merging PDFs.
* Can include **page numbers**, customer-specific info, and date automatically.

**Cons:**

* Slightly more code since you need to iterate over all pages.

---

### **Recommended Approach**

For professional reports:

* **Static header elements** (logo, fixed title) ‚Üí part of template.
* **Dynamic elements** (page numbers, customer name, generated date) ‚Üí added **post-processing** after filling/merging/flattening.

This ensures that no matter how many pages you add dynamically (summary, annexures), every page has correct headers/footers.

---

### **Example: Adding Dynamic Headers & Footers Post-Filling**

```java
PDDocument document = PDDocument.load(new File("FinalReport.pdf"));
int totalPages = document.getNumberOfPages();

for (int i = 0; i < totalPages; i++) {
    PDPage page = document.getPage(i);

    try (PDPageContentStream cs = new PDPageContentStream(
            document, page, PDPageContentStream.AppendMode.APPEND, true, true)) {

        // HEADER
        cs.beginText();
        cs.setFont(PDType1Font.HELVETICA_BOLD, 12);
        cs.newLineAtOffset(50, page.getMediaBox().getHeight() - 30); // 30 units from top
        cs.showText("Customer Report - Sridhar Balasubramanian");
        cs.endText();

        // FOOTER
        cs.beginText();
        cs.setFont(PDType1Font.HELVETICA_OBLIQUE, 10);
        String footer = "Page " + (i + 1) + " of " + totalPages + " | Generated on 2025-10-08";
        float stringWidth = (PDType1Font.HELVETICA_OBLIQUE.getStringWidth(footer) / 1000) * 10;
        float x = page.getMediaBox().getWidth() - stringWidth - 40;
        float y = 30; // bottom margin
        cs.newLineAtOffset(x, y);
        cs.showText(footer);
        cs.endText();
    }
}

document.save("FinalReportWithHeadersFooters.pdf");
document.close();
```

**Result:**

* Each page has the header at the top and footer at the bottom.
* Works dynamically regardless of the number of pages or merged PDFs.

---

üí° **Key Takeaway:**

* **Static elements** ‚Üí include in template.
* **Dynamic content** ‚Üí draw after filling/flattening/merging.

---

If you want, I can create a **full end-to-end batch PDF workflow** that:

* Fills forms,
* Adds cover & summary pages,
* Merges annexures,
* Adds **dynamic headers & footers with page numbers** for every page,
* And outputs multiple PDFs for multiple customers automatically.

Do you want me to do that next?
